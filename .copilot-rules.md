# Copilot Rules (workspace)

Saved: 2025-12-07

Scope: this workspace (`running_page`)

Rules:

1. Do not push without confirmation
   - Description: Refuse to push to `origin` unless the user explicitly issues the command `push it`.
   - When to apply: before any `git push` executed by the assistant.
   - Enforcement: the assistant will always prompt and require the exact phrase `push it`.

2. Backup before destructive operations
   - Description: Always create a backup branch before any merge, reset, revert, or other destructive operation.
   - When to apply: before merges, rebases, resets, hard checkouts, or commits that undo large changes.
   - Enforcement: assistant will create a branch named `pre-<action>-<ts>` or `merged-upstream-backup` as appropriate.

3. Running-data handling (do NOT modify these folders)
   - Description: Do NOT modify files or directories under `assets`, `activities`, `FIT_OUT/`, `GPX_OUT/`, `TXT_OUT/`, `PNG_OUT/`, or `TCX_OUT/`. The assistant will avoid staging, committing, or merging changes that alter files in these folders.
   - Rationale: Running data is managed locally and must not be changed by automated merges or assistant actions.
   - When to apply: whenever performing merges, rebases, commits, or other repository operations that would touch running-data paths.
   - Enforcement: the assistant will refuse to deliberately modify files in these directories. Specifically:
     - The assistant will create a backup branch before any operation that could affect these paths.
     - For merges, the assistant will prefer the local version of files under these directories (using `.gitattributes` with `merge=ours`) so upstream changes are not applied.
     - If upstream introduces tracked files inside these directories, the assistant will remove those files from the index (preserving local copies) and notify you; it will not delete local data without explicit instruction.
     - The assistant will report all actions and ask for confirmation before pushing any changes that relate to these directories.

4. Large-merge guard
   - Description: If a merge changes more than 100 files, stop and ask for explicit confirmation before committing.
   - When to apply: during merges or when applying upstream changes.
   - Enforcement: assistant will show a summary and require a confirmation phrase before committing.

5. Persistence
   - Description: These rules are saved in this file and apply to assistant actions in this workspace. The assistant may refuse actions that conflict with these rules.

Notes
- These rules cannot override global system or developer constraints (safety & workspace execution policies).
- If you want `.gitignore` entries adjusted (removed or added) for historical commits, explicitly request that change and confirm the exact modifications.
